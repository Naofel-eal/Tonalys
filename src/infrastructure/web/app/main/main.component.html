<ion-content [fullscreen]="true" class="main-content">
  <div class="content-wrapper">
    <div class="page-header">
      <h2 class="page-title">Discover Piano Scales</h2>
      <p class="page-description">Explore scales, understand their composition, and visualize them on the piano</p>
    </div>

    @let scales = scales$ | async;
    @if (scales?.length) {
      <div class="scales-grid">
        @for (scale of scales; track $index) {
          <article class="scale-card">
            <ion-router-link
              class="scale-link"
              [routerLink]="['/scale', scale.tonic.name, scale.mode.name]"
              routerDirection="forward"
            >
              <div class="scale-header">
                <div class="scale-info">
                  <h3 class="scale-name">
                    {{ scale.tonic.name }}
                    <span class="scale-mode">{{ scale.mode.name }}</span>
                  </h3>
                </div>
                <div class="nav-icon">
                  <ion-icon name="chevron-forward-outline"></ion-icon>
                </div>
              </div>

              <div class="notes-container">
                <div class="notes-label">Notes</div>
                <div class="notes-grid">
                  @for (note of scale.notes; track note.name) {
                    <span
                      class="note-badge"
                      [class.root-note]="note.name === scale.tonic.name"
                    >
                      {{ note.name }}
                    </span>
                  }
                </div>
              </div>

              <div class="piano-container">
                <app-piano-octave
                  [notesToHighlight]="scale.notes"
                  [rootNote]="scale.tonic"
                ></app-piano-octave>
              </div>
            </ion-router-link>
          </article>
        }
      </div>
    } @else {
      <div class="empty-state">
        <div class="empty-icon">
          <ion-icon name="piano-outline" size="large"></ion-icon>
        </div>
        <h3 class="empty-title">No scales found</h3>
        <p class="empty-description">Check your connection or try refreshing the page</p>
      </div>
    }
  </div>
</ion-content>