<header class="app-header" [ngClass]="{'reduced': headerReduced}">
  <div class="header-container">
    <div class="brand-section">
      <h1 class="brand-title">Tonalys</h1>
      <p class="brand-subtitle">Piano Scales Explorer</p>
    </div>
  </div>
</header>

<main class="main-content">
  <div class="content-wrapper">
    <div class="page-header">
      <h2 class="page-title">Discover Piano Scales</h2>
      <p class="page-description">Explore scales, understand their composition, and visualize them on the piano</p>
    </div>

    @let scales = scales$ | async;
    @if (scales?.length) {
      <div class="scales-grid">
        @for (scale of scales; track $index) {
          <article class="scale-card">
            <a class="scale-link" [routerLink]="['/scale', scale.tonic.name, scale.mode.name]">
              <div class="scale-header">
                <div class="scale-info">
                  <h3 class="scale-name">{{ scale.tonic.name }} <span class="scale-mode">{{ scale.mode.name }}</span></h3>
                </div>
                <div class="nav-icon">
                  <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <path d="M7.5 5L12.5 10L7.5 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </div>

              <div class="notes-container">
                <div class="notes-label">Notes</div>
                <div class="notes-grid">
                  @for (note of scale.notes; track note.name) {
                    <span class="note-badge" [class.root-note]="note.name === scale.tonic.name">
                      {{ note.name }}
                    </span>
                  }
                </div>
              </div>

              <div class="piano-container">
                <app-piano-octave
                  [notesToHighlight]="scale.notes"
                  [rootNote]="scale.tonic">
                </app-piano-octave>
              </div>
            </a>
          </article>
        }
      </div>
    } @else {
      <div class="empty-state">
        <div class="empty-icon">
          <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
            <rect x="8" y="16" width="48" height="32" rx="4" stroke="currentColor" stroke-width="2"/>
            <rect x="12" y="20" width="4" height="16" fill="currentColor"/>
            <rect x="20" y="20" width="4" height="16" fill="currentColor"/>
            <rect x="28" y="20" width="4" height="16" fill="currentColor"/>
            <rect x="36" y="20" width="4" height="16" fill="currentColor"/>
            <rect x="44" y="20" width="4" height="16" fill="currentColor"/>
            <rect x="52" y="20" width="4" height="16" fill="currentColor"/>
          </svg>
        </div>
        <h3 class="empty-title">No scales found</h3>
        <p class="empty-description">Check your connection or try refreshing the page</p>
      </div>
    }
  </div>
</main>